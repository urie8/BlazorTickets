@using Shared.Models
@using Shared

<EditForm Model="NewTicket" OnValidSubmit="HandleSubmit" class="card w-50">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <label>
        Title
  
    <InputText @bind-Value="NewTicket.Title"></InputText>
    </label>
    <label>
        Description
    <InputTextArea @bind-Value="NewTicket.Description"></InputTextArea>
    </label>
    <label>
        Submitted by:
    <InputText @bind-Value="NewTicket.SubmittedBy"></InputText>
    </label>
    <label>
        Tags:
       
    </label>
    <InputSelect TValue="string" @bind-Value="Tag" >
        
        @foreach (var tag in Enum.GetNames(typeof(Tag)))
        {
            <option  value="@tag" >@tag </option>
        }

    
    </InputSelect>

    <input type="submit" value="Create a ticket" />
</EditForm>

@code {
    public TicketApiModel NewTicket { get; set; } = new();
    public string Tag { get; set; }
    private bool isLoading;

    private async Task HandleSubmit()
    {
        isLoading = true;

        // Skicka det nya animalet till API:t
        NewTicket.Tags.Add(Tag);

        isLoading = false;
    }
    

}
